<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <link href="css/main.css" rel="stylesheet" type="text/css">
        <link href="css/font-awesome-4.7.0/fa/css/font-awesome.min.css" rel="stylesheet" >
        <link href='https://fonts.googleapis.com/css?family=Lato' rel="stylesheet" type="text/css">
        <link href='css/flatpicker.min.css' rel="stylesheet" type="text/css">
        <script src="js/flatpicker.min.js"></script>
        <script src="js/popper.js"></script>
        <link href='css/airbnb.css  
        .' rel="stylesheet" type="text/css">
    </head>
    <body>
        <!-- Floating Menu Bar-->
        <div id="navbar"></div>
        
        <div class="form-center">
            <!-- Title-->
            <h1>Register</h1>
            <br>
            <!-- main inputs -->

            <!--Username/Name tab <0> -->
            
            <div class="tab">
                <!-- name and username -->
                <div id="float-container" class="float-container">
                    <label for="firstname">First Name</label>
                    <input id="firstname" class="floatField" type="text">
                </div>
                <br>
                <br>
                <br>
                <div id="float-container" class="float-container">
                    <label for="lastname">Last Name</label>
                    <input id="lastname" class="floatField" type="text">
                </div>
                <br>
                <br>
            </div>
            
            <!-- Password tab <1> -->
            
            <div class="tab">
                <!-- password and passwor confirm -->

                <div id="float-container" class="float-container">
                    <label for="pw" class="inner-label">Password</label>
                    <i class="fa fa-eye password-toggle-button" aria-hidden="true" onclick="pwtextswitch()"></i>
                    <input type="password" class="floatField" id="pw" onkeyup='pwcheck()'>
                </div>

                <!-- Password caution text -->
                
                <div id="warn-parent">                   
                    <div id="warn-text">
                        <i class="fa fa-exclamation-circle fa-lg" aria-hidden="true"></i>
                        Password should be a minimum of 8 characters
                    </div>
                    <!-- password checks out-->
                    <div id="warn-text2">
                        <i class="fa fa-check-circle fa-lg" aria-hidden="true"></i>
                        Password matches
                    </div>
                </div>
                <br>
                <!-- Confirm Password -->
                <div id="float-container" class="float-container" onclick="document.getElementById('pwconfirm').focus(); return false;">
                    <label for="pwconfirm" class="inner-label">Retype Password</label>
                    <i class="fa fa-eye password-toggle-button" id="password-toggle-buttons" onclick="pwtextswitch()"></i>
                    <input type="password" class="floatField" id="pwconfirm" onkeyup="pwcheck2(); pwcheck()">
                </div>
                <!-- Password Match text div-->
                <div id="password-match"><i class="fa fa-exclamation-circle fa-lg" aria-hidden="true"></i> Passwords do not match!</div>
            <br>
            </div>

            <!-- Location tab <2>-->

            <div class="tab">
            <!-- State-->
            <div id="float-container" class="float-container">
                <label for="state">State</label>
                <input id="state">
            </div>
            <br>
            <br>
            <br>
            <div id="float-container" class="float-container">
                <label for="address">Country</label>
                <input id="Country" type="text" height="4em">
            </div>
            </div>
            
            <!-- personal information -->

            <div class="tab">
                <div id="float-container" class="float-container">
                    <label for="dob">Date of Birth</label>
                    <input id="dob" type="text" class="datetime">
                </div>
                <br>
                <br>
                <br>
                <div>

                </div>
            </div>



            <!-- Set Appointment tab <4> -->

            <div class="tab">
            <!-- date&time -->
            <div id="float-container" class="float-container">
                <label for="name">Appointment Date</label>
                <input id="datetime" class="datetime" type="text">
            </div>
            </div>

            <!-- space for distance -->
            <br>
            
            <!-- back button -->
            <span id="back-button" onclick="buttonchanger(); pagedown()">Back</span>
            
            <!-- button spacer span -->
            <span id="button-spacer"></span>
            
            <!-- submit button -->
            <span id="submit-button">Submit</span>
            
            <!-- next button -->
            <span id="next-button" onclick="buttonchanger(); pageup()">Next</span>


        </div>
        
        <!-- flatpicker js instancer -->

        <script>
            //new flatpickr instance
            flatpickr(".datetime", {});
        </script>   

        <!-- popper tooltips -->

        <script>


        </script>

        <!-- general -->

        <script>
            //onload hideall
            
            document.getElementById("warn-text").style.visibility = "hidden";
            document.getElementById("warn-text2").style.visibility = "hidden";
            document.getElementById("password-match").style.visibility = "hidden";
            
            //pagetabs

                //set current page to 0
            var page = 0;
                //create tabs array
            const tabs = document.getElementsByClassName("tab");
                //tabs array size
            const tablen = tabs.length;
                //loop to hide all tabs
            for (var i = 0; i < tablen; i++) {
                tabs[i].style.display = 'none';
            };
            tabs[0].style.display="block";
            
            //multipage controller
            
            //pageforward

            function pageup(){
                if(page == tablen - 1){
                    return;
                }
                page++;
                var n = page - 1;
                tabs[n].style.display="none";
                tabs[page].style.display="block";
                console.log(page);
                console.log(n);
            }

            
            //pagebackwards
            
            function pagedown(){
                if(page == 0){
                    return;
                }
                page--;
                var n = page + 1;
                tabs[n].style.display="none";
                tabs[page].style.display="block";
                console.log(page);
                console.log(n);
            }
            
            //submitter
            function buttonchanger(){
                if(page == 0){
                document.getElementById("back-button").style.display= "none";
                document.getElementById("submit-button").style.display="none";
                }
                if(page != 0 && page != tablen -2){
                    document.getElementById("back-button").style.display="inline-block";
                }
                if(page == tablen - 2){
                    document.getElementById("next-button").style.display="none";
                    document.getElementById("back-button").style.display="none";
                    document.getElementById("submit-button").style.display="inline-block";
                }
            }
            
            
            //initial check for page1
            buttonchanger();


            //sticky navbar
            window.onscroll = function() {scroller()};

            // Get the navbar
            var navbar = document.getElementById("navbar");

            // Get the offset position of the navbar
            var sticky = navbar.offsetTop;

            // Add the sticky class to the navbar when you reach its scroll position. Remove "sticky" when you leave the scroll position
            function scroller() {
            if (window.pageYOffset >= sticky) {
                navbar.classList.add("sticky")
            } else {
                navbar.classList.remove("sticky");
            }
            }

            //floating input controller
            
            const FloatLabel = (() => {
  
                // add active class
                const handleFocus = (e) => {
                const target = e.target;
                target.parentNode.classList.add('active');
                target.setAttribute('placeholder', target.getAttribute('data-placeholder'));
                };

                // remove active class
                const handleBlur = (e) => {
                const target = e.target;
                if(!target.value) {
                target.parentNode.classList.remove('active');
                }
                target.removeAttribute('placeholder');
                };

                // register events
                const bindEvents = (element) => {
                const floatField = element.querySelector('input');
                floatField.addEventListener('focus', handleFocus);
                floatField.addEventListener('blur', handleBlur);    
                };

                // get DOM elements
                const init = () => {
                const floatContainers = document.querySelectorAll('.float-container');

                floatContainers.forEach((element) => {

                if (element.querySelector('input').value) {
                element.classList.add('active');
                }

                bindEvents(element);
                });
                };

                return {
                init: init
                };
                })();

                FloatLabel.init();
            

                    //password visibility toggle

                    function pwtextswitch(){
                        
                        if(document.getElementById("pw").getAttribute("type") == 'password')
                            {
                                console.log("y");
                                document.getElementById("pw").type = "text";
                                return;
                            }
                        if(document.getElementById("pw").getAttribute("type") == 'text'){
                                console.log("y");
                                document.getElementById("pw").type = "password";
                                return;
                            }    
                    }
                    function pwtextswitch2(){
                        if(document.getElementById("pwconfirm").getAttribute("type") == 'password')
                            {
                                console.log("y");
                                document.getElementById("pwconfirm").type = "text";
                                return;
                            }
                        if(document.getElementById("pwconfirm").getAttribute("type") == 'text'){
                                console.log("y");
                                document.getElementById("pwconfirm").type = "password";
                                return;
                            }
                    }

                    //password checker function
                
                    function pwcheck(){
                        var password = document.getElementById("pw").value;
                        var passwordconfirm = document.getElementById("pwconfirm").value;
                        if(password.length < 8){
                            document.getElementById("warn-text").style.visibility = "visible";
                            document.getElementById("warn-text2").style.visibility = "hidden";
                            document.getElementById("password-match").style.visibility = "hidden";
                        }
                        if (password == passwordconfirm && password.length >= 8){
                            document.getElementById("password-match").style.visibility = "hidden";
                            var content = document.getElementById('warn-text2');
                            var parent = content.parentNode;
                            parent.insertBefore(content, parent.firstChild);
                            document.getElementById("warn-text2").style.visibility = "visible";
                            document.getElementById("warn-text").style.visibility = "hidden";
                        }
                        if(password != passwordconfirm && password.length >= 8){
                            document.getElementById("warn-text").style.visibility = "hidden";
                            document.getElementById("password-match").style.visibility = "visible";
                        }
                        if(passwordconfirm == ''){
                            document.getElementById("password-match").style.visibility = "hidden";
                        }
                    }

                    function pwcheck2(){
                        var password = document.getElementById("pw").value;
                        var passwordconfirm = document.getElementById("pwconfirm").value;
                        if(password != passwordconfirm && password.length >= 8){
                            document.getElementById("password-match").style.visibility = "visible";
                        }
                    }

                    var x, i, j, l, ll, selElmnt, a, b, c;
                    /* Look for any elements with the class "custom-select": */
                    x = document.getElementsByClassName("custom-select");
                    l = x.length;
                    for (i = 0; i < l; i++) {
                    selElmnt = x[i].getElementsByTagName("select")[0];
                    ll = selElmnt.length;
                    /* For each element, create a new DIV that will act as the selected item: */
                    a = document.createElement("DIV");
                    a.setAttribute("class", "select-selected");
                    a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
                    x[i].appendChild(a);
                    /* For each element, create a new DIV that will contain the option list: */
                    b = document.createElement("DIV");
                    b.setAttribute("class", "select-items select-hide");
                    for (j = 1; j < ll; j++) {
                        /* For each option in the original select element,
                        create a new DIV that will act as an option item: */
                        c = document.createElement("DIV");
                        c.innerHTML = selElmnt.options[j].innerHTML;
                        c.addEventListener("click", function(e) {
                            /* When an item is clicked, update the original select box,
                            and the selected item: */
                            var y, i, k, s, h, sl, yl;
                            s = this.parentNode.parentNode.getElementsByTagName("select")[0];
                            sl = s.length;
                            h = this.parentNode.previousSibling;
                            for (i = 0; i < sl; i++) {
                            if (s.options[i].innerHTML == this.innerHTML) {
                                s.selectedIndex = i;
                                h.innerHTML = this.innerHTML;
                                y = this.parentNode.getElementsByClassName("same-as-selected");
                                yl = y.length;
                                for (k = 0; k < yl; k++) {
                                y[k].removeAttribute("class");
                                }
                                this.setAttribute("class", "same-as-selected");
                                break;
                            }
                            }
                            h.click();
                        });
                        b.appendChild(c);
                    }
                    x[i].appendChild(b);
                    a.addEventListener("click", function(e) {
                        /* When the select box is clicked, close any other select boxes,
                        and open/close the current select box: */
                        e.stopPropagation();
                        closeAllSelect(this);
                        this.nextSibling.classList.toggle("select-hide");
                        this.classList.toggle("select-arrow-active");
                    });
                    }

                    function closeAllSelect(elmnt) {
                    /* A function that will close all select boxes in the document,
                    except the current select box: */
                    var x, y, i, xl, yl, arrNo = [];
                    x = document.getElementsByClassName("select-items");
                    y = document.getElementsByClassName("select-selected");
                    xl = x.length;
                    yl = y.length;
                    for (i = 0; i < yl; i++) {
                        if (elmnt == y[i]) {
                        arrNo.push(i)
                        } else {
                        y[i].classList.remove("select-arrow-active");
                        }
                    }
                    for (i = 0; i < xl; i++) {
                        if (arrNo.indexOf(i)) {
                        x[i].classList.add("select-hide");
                        }
                    }
                    }

                    /* If the user clicks anywhere outside the select box,
                    then close all select boxes: */
                    document.addEventListener("click", closeAllSelect); 
        </script>
    </body>
</html>